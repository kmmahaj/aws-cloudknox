AWSTemplateFormatVersion: '2010-09-09'
Description: AWS Secrets Manager for CloudKnox

Parameters:
  accessKey:
    Description: >-
      REQUIRED. Default Access Key for CloudKnox
    Type: String
    AllowedPattern: .+
    Default: "SAAKPTJKIVXWBHCN"
    ConstraintDescription: accessKey is required
  secretKey:
    Description: >-
      REQUIRED. Default Secret Key for CloudKnox
    Type: String
    AllowedPattern: .+
    Default: "DWUB6rnj4L7fakMB"
    ConstraintDescription: secretKey is required
  serviceId:
    Description: >-
      REQUIRED. Default Service Account ID for CloudKnox
    Type: String
    AllowedPattern: .+
    Default: "SA28FPC69M5WZANP"
    ConstraintDescription: serviceId is required
  apiId:
    Description: >-
      REQUIRED. Default API ID for CloudKnox
    Type: String
    AllowedPattern: .+
    Default: "21564ec10f7943d7eb031e74e69f1abc"
    ConstraintDescription: api Id is required
  url:
    Description: >-
      REQUIRED. Default url for CloudKnox
    Type: String
    AllowedPattern: .+
    Default: "app.cloudknox.io"
    ConstraintDescription: url is required

Resources:

  CloudKnoxSecretString:
    Type: AWS::SecretsManager::Secret
    Properties:
      Description: Credentials required for CloudKnox
      Name: CloudKnoxSecretString
      SecretString:
        Fn::Join:
        - ''
        - - '{"serviceId":"'
          - Ref: serviceId
          - '","apiId": "'
          - Ref: apiId
          - '","accessKey": "'
          - Ref: accessKey
          - '","secretKey": "'
          - Ref: secretKey
          - '","url": "'
          - Ref: url
          - '","accountId": "'
          - Ref: AWS::AccountId
          - '"}'
  